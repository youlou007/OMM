<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>OMM - Poèmes</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>
<header>
  <h1>Mes Poèmes</h1>
  <input type="text" id="searchInput" placeholder="Rechercher un poème..." />
</header>

<main id="poemsContainer">
  <!-- Les poèmes seront chargés ici dynamiquement -->
</main>

<footer>
  <p>&copy; 2025 OMM</p>
</footer>

<script>
async function fetchPoems() {
  const response = await fetch('poems/poems.json');
  if (!response.ok) {
    document.getElementById('poemsContainer').innerHTML = "<p>Impossible de charger les poèmes.</p>";
    return;
  }
  const poems = await response.json();
  displayPoems(poems);
}

function displayPoems(poems) {
  const container = document.getElementById('poemsContainer');
  container.innerHTML = '';
  poems.forEach(poem => {
    const div = document.createElement('div');
    div.className = 'poem';
    div.innerHTML = `
      <h2>${poem.title}</h2>
      <p class="date">${poem.date}</p>
      <pre>${poem.content}</pre>
    `;
    container.appendChild(div);
  });
}

document.getElementById('searchInput').addEventListener('input', async function(e) {
  const query = e.target.value.toLowerCase();
  const response = await fetch('poems/poems.json');
  if (!response.ok) return;
  const poems = await response.json();
  const filtered = poems.filter(p => 
    p.title.toLowerCase().includes(query) || 
    p.content.toLowerCase().includes(query)
  );
  displayPoems(filtered);
});

fetchPoems();
</script>
</body>
</html>